05.01.2005 день рождения Bombus. 2 месяца до начала changelog
09.03.2005
 changelog.txt - начало

 MessageList теперь показывает символ ">" в конце строки, обозначая
 неполное отображение сообщения в списке. требуется просмотреть сообщение

 presence type error теперь отображается дополнительным значком.

 кэширование строк ростера. очень актуально для M55

 заменён разделитель смайликов с 0x20 на 0x09 для смайликов, содержащих " "

 сравнение JID теперь non-case-sensitive

 сплэш для m55

10.03.2005
 научился компилировать под платформу M55

 проба со звуком и виброй

 "Failed", если неверный логин

11.03.2005
 иконка subscription=none

 в версии M55 поменялись местами вызовы Player и Vibra

 теперь инициализация соединения производится не в Roster(),
 а в Roster.run() - закладка возможности Reconnect

 Reconnect, Logoff

 - пока нет проверок при отправках сообщений на offline

12.03.2005
 кэш ростера включен

 переделан MessageList - теперь каждое сообщение в отдельной строке


14.03.2005
 найдена уязвимость к DoS атаке - приём большого пакета данных.

16.03.2005
 fix: VirtualList.moveCursorTo(index) - курсор попадал на неполностью 
 прорисованную строку внизу рабочей области - не учитывалась высота заголовка

 осознана необходимость оформить Vector "строки и иконки вперемежку" в отдельный
 класс.

 сделан пакующий скрипт для релиза версий.

 fix: фиксы для ширины парсинга (частично решает проблему символа '>' )

 команда Back в MessageView

17.03.2005
 создан класс ComplexString - содержит: 
  подстроки, 
  индексы иконок, 
  прикреплённый ImageList
  цвет следующей подстроки

 переведены на этот класс заголовки окон, строки MessageView и MessageList

 VirtualList теперь использует строки переменной высоты.
 теоретически возможно некоторое замедление из-за необходимости пересчёта числа
 отображаемых строк при перемещении вверх.

 отключен cursorOutline для m55

18.03.2005
 fix: багфиксы перемещения курсора, вызванные изменениями VirtualList

 выход из SmilePicker

 скроллбар динамический - появляется только при необходимости
 пока не изменяется ширина отрисовываемого LostItem, но курсор рисуется
 на всю доступную ширину


 парсинг сообщения в MessageView вынесен из конструктора в Thread, что позволяет
 читать сообщение ещё в процессе парсинга.

19.03.2005
 fix: очередные багфиксы перемещения курсора, вызванные изменениями VirtualList
 (pageup)

 fix: Home/End в SmilePicker теперь перемещают на 1 и последний смайл соответственно,
 а не на 1-ю и последнюю строку смайлов

 увеличен период вызовов repaint при парсинге (1 вызов на 5 строк)

 параметр KeepAlive в jad - период посылки пакета для поддержки соединения
 (по умолчанию 300 секунд). посылается символ ' '

 класс Config с глобальным доступом (singleton) - чтение настроек из jad и rms

 в MessageList добавлена команда Quote

 в заголовке MessageEdit пишется "Кому"

 не сбрасываются при переходе в offline статусы error и subscription:none

 выравнивание элемента ComplexString по правой границе

 fix: - переход в offline в случае потери соединения не приводил к обновлению
 экрана


21.03.2005
 окно выбора аккаунта AccountSelect (пока нет защиты от пустых аккаунтов)
 пока не показывает активный аккаунт

 хранение аккаунтов в rms

 форма создания и редактирования аккаунта

 первый раз после установки в телефон приложение всегда выдаёт AccountSelect
 при повторных запусках - по нажатию клавиши в процессе надписи Loading.
 пока нет мнговенной реакции на нажатие клавиши, т.к. происходит загрузка классов

 изменение имён атрибутов аккаунта по умолчанию (jad)

 пробы context-sensitive меню.

22.03.2005
 правка выравнивания по правому краю.

 fix: Account.createFromJad - теперь всегда возвращает null при неудачном
 считывании (если нет def_user, def_pass, ...)

 правка Account.createFromRMS - теперь всегда возвращает null при неудачном
 считывании

 выделение активного аккаунта в AccountSelect

23.03.2005
 для M55 конфигурация и аккаунты теперь хранятся в файлах, а не в rms
 (папка storage)

25.03.2005
 Путь конфигурации в jad вида: cfg_path: a:\путь\
 закрывающий слэш обязателен!
 по умолчанию - папка storage

 проба подключения значка "вибры" - пока без функциональности

 теперь VirtualList заполняет экран чистым фоном, если нет ни одного элемента
 немного оптимизирована отрисовка фона

 инфа о версии берётся из jad

26.03.2005
 в MessageList добавляются статусы контакта.
 
 сделано редактирование статусов. возможна установка приоритета и сообщения 
 для каждого статуса.

 хранение статусов в store/file "status"

 очень вырос размер (на 4.5 кб) :'(

 уменьшена задержка появления картинки сплэш-скрина.

 в сплэшскрине теперь ip сервера не отображается, пишется только имя сервера

27.03.2005

 атрибут в jad alert_profile: 0..4
    AUTO=0; (пока =1)
    ALL=1; (default)
    NONE=2;
    VIBRA=3;
    SOUND=4;
 обозначает профиль по умолчанию. введён для отладки.

 в MessageList курсор устанавливается на первое непросмотренное сообщение, а
 не на статус.

 меню AlertProfile

 атрибут в jad
 msg_snd: /sounds/message.wav

28.03.2005
 Если статусное сообщение пустое, "" больше не пишутся (StatusSelect)

 исправлен поиск контакта с сообщениями, если курсор стоит на группе ("0")

 изменён цвет статусных сообщений в MessageList

 начата глобальная ревизия кода, поиск неэффективных участков

29.03.2005

 0.1.4

 скрытие оффлайн-контактов. пункт меню Show/Hide Offlines
 прячутся оффлайны без новых сообщений (может сделать только оффлайны без
 сообщений?) всё ещё нет сортировки ростера.

 имя группы теперь как в psi:    group (onlines/total)

 некоторые изменения сплэш-скрина

 сделал что-то ещё, но не помню :(

 внимание! во всех версиях MIDP2 (и в этой) в качестве звука используется
 AMR (по умолчанию). переключение - добавить атрибут в jad
 msg_snd: /sounds/message.wav

31.03.2005

 сортировка ростера - контакты в пределах группы сортируются по статусу

01.04.2005

 управление подсветкой экрана siemens m55

 m55 leds: введён атрибут led_pattern: 0..13

   0=off (default)	
   1=SPEED		
   2=LIGHTHOUSE 
   3=WAVE		
   4=BEAT	
   5=RUNWAY	
   6=TRANCE	
   7=ETERNITY	
   8=STROBO	
   9=LIMELIGHT	
   10=NORMAL_BLINKING	
   11=PULSATING	
   12=CONSTANLY_LITEUP	
   13=IDLE	

 в дальнейнем будут строковые иденты

 малые багфиксы. (поведение Hide Contacts при Logoff)

09.04.2005

 0.1.5

 защита от переполнения буфера при приёме сообщения. 
 (пока жёсткое ограничение 5000 символов)
 в конце принятого обрезаного блока символы "..."

 фикс пропадания курсора при реконнекте


 запись журнала сообщений в файл вида "Log_nickname"
 msg_log: 1/0 - разрешение журнала. default=0

 msg_log_path: a:\путь\
 закрывающий слэш обязателен!
 по умолчанию - папка storage

 msg_log_presence: 1/0 - добавлять и presence 
 (шпиёнская функция. работает только при msg_log: 1)

11.04.2005
 у групп General и Transports убраны хвостовые пробелы

 исходящее сообщение: пустое сообщение не отправляется
 исходящее сообщение: тоже добавляется в журнал сообщений (фикс)

 
14.04.2005
 история Sienens: буквы Ё,ё
 история Sienens: расширение .txt
 история Sienens: DD.MM.YY hh:mm

 атрибут moto_e398: 1/0 (default=0) - пока только запрещает мигание подсветкой

 введён тип атрибутов boolean для jad.
 (moto_e398, msg_log, msg_log_presence)
 значение "истина" - true, yes или 1

 оптимизация работы редактора аккаунтов при старте - теперь не грузит намертво 
 java-машину. очень мешало пользователям S65

 команда Account - пробное переключение аккаунтов

21.04.2005
 переход на страницу cp1251 
 фикс надписи Loading (после Connect to)

24.04.2005
 0.1.6
 формат версии: A.B.C.$WCREV$

 локальный репозиторий subversion

 запись Config при выходе из программы

 изменение идеологии вызова AccountSelect; как результат - при отмене выбора аккаунта
 не происходит реконнект.

 создание аккаунта: теперь можно в поле username писать username@jabber.server
 при этом jabber.server скопируется в поле server.

 Register Account в форме нового аккаунта

 работает регистрация аккаунтов. (правда, бесполезна без добавления контактов)

 фикс: при открытии потока в заголовке
 <?xml version="1.0"?>
 <stream:stream ... to="servername" >
 вместо servername указывался ip (если был указан).

 фикс: отключен приём пустых входящих сообщений.

 15 % от управления контактами - принимаются входящие события по управлению ростером. 
 теперь контакт перемещается из группы в группу, а также удаляется по командам сервера

 фикс: считались одинаковыми JID@server/resource, JID@server/ReSoURCE, JID@server/resource2
 т.е. игнорировался регистр ресурса и (в некоторых случаях) длина.
 теперь сравниваются по следующим правилам:
 JID@server - non-case-sensitive,
 resource - case-sensitive.

 известный баг: перемещение контакта переводит его в offline.
 будет исправлено после добавления механизма subscription.

29.04.2005
 0.1.7
 сохранение профиля сигналов. 
 убран отладочный атрибут alert_profile (27.03.2005)

 в версии MIDP2 введён экспериментальный режим fullscreen

01.05.2005

 перевод VirtualList на использование VirtualElement
 пока отключен кэш строк ростера. (изменение механизма кэширования)

 убираются whitespaces в конце входящего сообщения.

 в MessageView в меню добавлен пункт Toggle Smiles. горячая клавиша - *

 ростер:
 добавлено меню "Contact >" - операции с выбраным контактом
 добавлена команда Add Contact
 команды пока нефункциональны.	

Motorola:
 Background: True
 FlipInsensitive: True
 позволяют приложению работать в фоновом режиме.

 теперь для моторолы собирается отдельный jad

02.05.2005

 курсор старается сохранить фокус при изменениях ростера.
  конечно же, сохранить позицию возможно не всегда 
  - например, потеряется, если объект исчез из отображаемого ростера 
  при hide offlines

 временно заблокирована проверка путей для теста на c55

0.1.8

 сохраняется профиль сигналов, выбраный командой Alert Profile/Set Default
 как профиль "по умолчанию" - метка (default)

 форма Options
 
 сохранение флагов Options:smiles, :transports
 скрытие группы транспортов

 Options:smiles влияет и на MessageList

 фикс Quote

 пробел перед названием команды в Contact >

 изменение порядка иконок профиля (отразилось только в структуре кода)

 расширена информация о клиенте в jabber:iq:version

03.05.2005

(28)

 fix Options:smiles

 группа Self-Contact, содержит контакты вида myJID/resource
 всегда есть контакт myJID/Bombus
 видна в случае Options:self-contact=true, либо число online-контактов
 больше 1

 заготовка в Options для not-in-list

(29)

 fix ComplexString без приаттаченного ImageList не позволял использовать 
 команды раскраски

 Options:fullscreen - убран из версии m55;

 fix Self-Contact - теперь продолжает корректно отображать статус после reconnect 

05.05.2005

 0.1.9 (34)

 fix: (частичный) конфликт между перемещением курсора кнопками и 
 сохранением фокуса на контакте при изменении порядка контактов в ростере

 Contact:Info - запрашивает vCard и версию клиента
 полученая информация сохраняется в списке сообщений.

 Add Contact - упрощённая версия - не использует ни name, ни group
 посылает запрос авторизации subscribe.

 иконка - символ состояния ask="subscribe"

 (36)
 Contact:Auth Send
 Contact:Auth Request
 Contact:Auth Remove

 известные баги: при Contact:Auth Remove в ростере добавляется JID без ресурса
 (контакт, у которого отменена авторизация)

 оптимизация обработки исключений theStream.send(JabberDataBlock)

 запросы авторизации сохраняются в виде сообщений. пока не выдаётся event

 значок реконнекта - теперь обозначает отправленый на сервер запрос.

 оптимизации кода

(37)
 удаление пока реализовано частично - удаляется только уже удалённый контакт (корзина)
 особенности авторизации - у авторизующего должен быть самый высокий приоритет

 0.1.10 (38) 
 fix: авторизация теперь использует JID без ресурсов
 авторизация работает правильно.
 TODO: 
   1. presence type=subscr* не должны влиять на статус (иногда контакт становится offline)
   2. events для presence type=subscr*, значок запроса авторизации
   3. редактирование контакта - нужна форма и выбор группы
   4. удаление контакта - мешает отсутствие диалога yes/no

 0.1.10 (39) tag

06.05.2005

(41)
  ошибки из версии 38
  fix: отделил "мух от котлет" vcard и contact info используют ресурс, 
  авторизации - нет
  fix: статусные иконки

  изменение идеологии нумерации иконок. вместо линейного индекса - двумерный
  вида 0xYX

(42)
  группа not in list:

  когда группа not-in-list включена, но пока пуста, 
  её заголовок в ростере не фигурирует

  если not-in-list выключена, сообщения от контактов вне ростера ТЕРЯЮСЯ. 
  когда включена, работает 100% как обычная группа


  группа Ignore-List (игнорлист):

  когда группа Ignore-List включена, но пока пуста, 
  её заголовок в ростере не фигурирует

  контакты группы Ignore-List не выдают event-ы 
  ни в скрытом, ни в свёрнутом, ни в развёрнутом состоянии. 
  пока даже не будет значка новых сообщений у контакта. 
  но сообщения принимаются.

  подсоединены новые иконки

  фикс вылетания курсора за пределы ростера

07.05.2005

(43)

  форма ввода/редактора аккаунта
  Contact:Edit

0.1.11 (44) tag

(46)
  фикс значка прихода сообщения (42)
  фикс значка статуса контакта  (36)

08.05.2005

(47)
  фикс приёма оффлайн-сообщений.
  фикс максимальной длины StringBuffer для m55 (4096)
  подготовка к добавлению в ContactEdit выбора транспортов
(49)
  больше не отправляется presence type="subscribe" при редактировании контакта
  сообщения авторизации пока тоже считаются как непрочитанные входящие  
(51)
  фикс переименовывания контакта

09.05.2005
(52)
  форма подтверждения удаления контакта, удаление контакта с сервера.
  сервер присылает подтверждение, у контакта появляется значок "корзина"

  разделение команды Contact:Info на Contact:Client Info и Contact:vCard

  subject из входящих сообщений. добавляется первой строкой, выделяется цветом 

  замена разделителя заголовков c 0x01 на 0xA0. 0xA0 (неразрывный пробел) не нарушает xml-поток

(53)
  subject раскрашивается в MessageView
  сохранение subject в версии m55
  команда MessageList:Quote квотит только тело, без subject
0.1.12 (55)
  улучшено поведение формы ContactEdit, дополнение окончания JID.

(57)
  fix: строка, следующая за Subject, неправильно резалась по ширине
  (это также влияло на наличие сливола > в MessageView)
  fix: убрана дублирующаяся строка Client info 
  fix: неправильно работало дополнение JID, если не был введён '@'
  допереименован Contact:Info в Contact:Client Info

(59)
  bug? S65 - не совсем понятно, почему этот телефон иногда не позволяет 
  переключить Display.setCurrent непосредственно перед работой с сетью
  (SetCurrent и сеть были вызваны в цикле обработки событий Canvas, 
  в обработчике keyPressed). возможно, это связано со значком GPRS

(60)
  оптимизация работы choisegroups в ContactEdit

(61)
  пароль в редакторе аккаунта виден только при вводе. если пароль 
  редактировать, то он будет виден только если очистить поле ввода

  fix: вызваное меню пропадало при вызове focusedItem - постоянно 
  удалялась и добавлялась команда Contact >
  вероятность, что меню исчезнет, остаётся, если контакт, на котором 
  стоит курсор, уйдёт в оффлайн, и после этого курсор окажется на группе

11.05.2005
(62)
  Add Contact: перед вводом JID транспорт установлен в <other>

  полноcтью переделано хранение subscription и ask.

  команда Contact:Subscription, выдаёт форму, содержащую:
   текущее состояние Subscription
   команды Request subscription, Send subscription, Remove Subscription.

  команды Contact:Auth * удалены.

  в Contact:Delete и Contact:Subscription используется представление 
  имени контакта как "nickname <JID>"

  YesNoAlert: замена типа команды cmdNo на Command.BACK (siemens red button)

  в vCard добавлен JID

  платформа MIDP1 у Siemens не поддерживает добавление команд в Alert
  переход с класса Alert на класс Form

(63)
  пробный фикс проблемы форм и ChoiceGroups m55 - если ChoiceGroup без заголовка,
  то при перемещении селектора (radio) ChoiseGroup перемещалась вверх, 
  в конце концов затирая вышерасположенные Item. добавлены заголовки.

0.1.14 (64)
  версия 13 традиционно пропущена :D

(66)
  Команда MessageView:Authorize - только в запросах на подписку.
  (пока ошибочно и в "You are now authorized")
  посылает "from"+"to"

  fix: не пересчитывался ростер при входящем сообщении 
  (не виден контакт с сообщением, если контакт оффлайн и выключен показ оффлайнов)

  fix: при удалении онлайн-контакта его значок не менялся на корзину

  fix: Form (на m55) не любит пустые строки. 
  (визуальные глюки в форме Subscription)

  fix: авторизация контакта, находящегося в инвизе, не меняла значок ask на offline

12.05.2005

(67)
  Add Contact - если курсор стоит на контакте группы Not-In-List, его JID
  помещается в форму нового контакта

  fix: статус контакта в группе Not-In-List теперь не Online, а unknown

  контакты Not-In-List показываются независимо от Options:offline contacts

(68)
  сохранение приоритета ресурса в статусных сообщениях

  проба сортировки: [Status][Nick|JID][priority]
  (для повышения скорости у Nick|JID сравниваются только 2 первых символа)

(69)
  fix: NullPointerException@MessageView

  не пишутся Priority у контактов, не возвращающих priority внутри presence

14.05.2005
(70)

  fix: первый presence от self-contact ресурса не-Bombus теперь записывается в 
  свой ресурс, а не в ресурс бомбуса

  fix: у транспортов правильно показывает subscription

  Status:Set priority и All priorities - ограничение ввода: только цифры 

  в presence-сообщениях указываются статусные сообщения и для offlines

  fix: при испорченом файле аккаунтов или неправильном индексе текущего аккаунта
  не виснет (x55), а входит в редактор аккаунтов

(71)
  отменил фикс форм m55 (63). imho, так неправильно.

(72)
  проба настройки TextField в Add/Edit Contact

15.05.2005

0.1.15 (73)

  отмена изменений (71)

  раскраска контактов в ростере 

  Bold для online contacts

  смайл :-"

16.05.2005
(74)
  удаление контактов из списка not-in-list  

  блокировка клавиатуры при длинном нажатии keyLock.

  переключение при длинном нажатии keyVibra профилей Default<->Vibra
  (пока не рассматривается вариант Default=Vibra)

  атрибуты jar:
  keyLock: *
  keyVibra: #
  (для версии m55 значения по умолчанию - # и * соответственно)

(75)
  fix: выправлена особенность работы keyLock, возникшая из-за особенностей эмуляторов

  оптимизация работы Roster: предзагрузка объектов Font. иначе на некоторых 
  телефонах приводит к существенному торможению прорисовки.
  (Alcatel 756, эмулятор S65).

(77)
  изменение поведения удаления контакта при при ответе Yes 
  на вопрос "Delete contact?":

  если контакт в ростере, то:
  статусный значок меняется на "корзину", обозначая отправленый запрос на удаление.
  после подтверждения сервером удаления контакта происходит удаление контакта из памяти
  телефона.

  если контакт в Not-in-list, то:
  контакт удаляется из памяти телефона сразу. 
  (в ростере на сервере контакты Not-in-list не хранятся

0.1.16 (78)
  подсчёт числа сообщений и огни M55
  флаг наличия сообщений сбрасывается, если:
     все новые сообщения были показаны на экране в MessageList,
     и курсор установлен на последнее сообщение в MessageList, и это сообщение
     поместилось полностью в одну строку, либо при входе в MessageView.

  также, флаг наличия сообщений сбрасывается, если:
     все новые сообщения были показаны на экране в MessageList,
     и произошёл выход из MessageView.

(80) стабильная версия 0.1.16 для Alcatel

17.05.2005

(81)

  fix: обработка keyLock идентично работает на имеющихся эмуляторах
  и Alcatel 756. Жду проверки на M55

  fix: Home, End (1/7) не вызывали focusedItem.

  подсчёт числа сообщений и огни M55. изменение поведения:
     если все новые сообщения показаны, 
     и курсор находится на последнем новом сообщении или после него, 
     снять флаг новых сообщений.
  поведение (78) отменено

  переименованы атрибуты jar: теперь key_lock и key_vibra

  для self-contact недоступны команды
  Contact:Edit, Contact:Delete, Contact:Subscription

(82) 
  значок новых сообщений в заголовке MessageList.
  та же функциональность, что и у огней m55


(83)
  косметика - изменение цветов ростера.

(84), (85)
  обработка времени отправки оффлайн-сообщения.
  атрибуты:
    time_gmt_offset  - часовой пояс, в котором расположен Bombus
    по умолчанию равны TimeZone.getDefault(); (этот часовой пояс 
    установлен в телефоне)

    time_loc_offset  - смещение для часов. используется, если GMT телефона
    не совпадает с реальным GMT. по умолчанию =0

  формат параметров: [-]H
  примеры:
  4 - летнее время для Москвы (GMT+4:00)
  3 - зимнее время для Москвы (GMT+3:00)
  -5 - Нью-Йорк (GMT-5:00)

25.05.2005
(86)
  форма редактирования статуса StatusForm, 
  команда Status:Edit вместо Status:Message, Status:Priority, Status:All Priorities

(87)
  оптимизация размера на 1 килобайт :)

(88)
  атрибут vibra_len: 500  (длительность сигнала по умолчанию - 500 мсек)

28.05.2005
0.1.17 (91)
  команда Contact:vCard - если vCard отсутствует, выдаётся соответствующее сообщение

  Contact:vCard и Contact:Client Info поменялись местами

  при загрузке ростера увеличение progress на сплэше. пользователи с размером ростера
  ~150 контактов очень скучали.

  управление подсветкой для e398 - гасится при блокировании кнопок

  в заголовке ростера (онлайны/всего контактов)
  "всео контактов" - не число уникальных JID, 
  а общее количество контактов ростера, в т.ч. и невидимые в данный момент контакты

  переход между сообщениями из MessageView. 
  осуществляется кнопками Left/4 и Right/6 при условии нахождения окна просмотра
  в начале и конце сообщения соответственно.

(92)
  MessageView теперь тоже отключает индикацию нового сообщения 
  (огни m55/значок нового сообщения в MessageList).

30.05.2005
0.1.18 (95)
  получение и хранение просмотр vCard:PHOTO.
  пока не работает на m55
(96)
  fix: base64 reader

(97)
  fix: управление подсветкой для e398 - гасится при блокировании кнопок

  stub для чтения vCard:PHOTO на m55 (полностью отключено для m55) для 
  устранения подвисаний.

  зелёная кнопка сименса - New Message. активный экран после выхода из
  New Message:
  при входе из ростера - ростер
  при входе из MessageList - MessageList
  при входе из MessageView - MessageList

(98)  
  fix: вылетание курсора за пределы ростера (чистый экран)
  например, Show Offlines+, переместить на один из последних оффлайнов,
  Show Offlines-

01.06.2005
0.1.19 (99)
  сортировка ростера - non-case-sensitive.

  fix: гашение огней m55 в MessageView.

  изменено хранение аккаунтов. Желательно удалить Storage, 
  либо файл accounts (m55)

  редактирование ресурса аккаунта

  fix: если аккаунт модифицирован и сохранён, то изменения в AccountSelect
  произойдут сразу, а в ростере вступят в силу только после перевыбора аккаунта!

  возможность установить имя аккаунта (опционально) - будет работать равнозначно
  Nickname для контактов. к примеру, в ростере вместо myJID@server/resource
  будет accName/resource

  Logon/Logoff для транспортов

0.1.19 (100)
  fix: русские имена в никах не позволяли редактировать контакт
  fix: длинные JID не позволяли редактировать контакт

03.06.2005
0.1.19 (102)
  // празднование юбилейного commit не прошло незаметно
  fix: опция Show offline contacts в отключеном состоянии приводила к исключению
  
  теперь по умолчанию включена группа not-in-list

(103)
  fix: зелёная кнопка больше не сворачивает/разварачивает группы

  посылка транспорту logon/logoff не меняет значок статуса в заголовке

  у транспортов теперь нет Contact:Edit
  на показ транспортов теперь не влияет show offlines

05.06.2005
(104)
  Service Discovery. пока нет форм, просто прогулка по дереву сервисов.

(105)
  fix: форма Status:Edit не изменяла приоритет у одиночных статусов, групповое
  изменение работало. (глюк с версии 86)

(106)
  форма регистрации транспортов JEP-0077 (in-band registration)
  пока нет поддержки jabber:x:data
  обработка ошибок регистрации

(107)
  Service Discovery: запоминание списка сервисов предыдущего уровня при 
  раскрытии вложения сервиса. не производится повторный запрос при перемещении
  назад по дереву сервисов.

  расширение информации об ошибке для сообщений presence (requires testing)

06.06.2005
0.1.20 (108)
  завершённость Service Discovery 55%
  нет формы Search, нет Join Groupchat

07.06.2005
  (110) 
  переход на NetBeans 4.1

  (111) 
  корректно обрабатываются все манипуляции с контактами, хранимыми на
  сервере в виде JID/resource

  отключен звук у Alert

08.06.2005
  (112)
  fix: обновление заголовка ServiceDiscovery при выполнении Back

  fix: Service Discovery на ы65 не работал.

  значки для Service Discovery

  (113)
  удалены команды Logoff и Reconnect - теперь Status:Offline производит разрыв
  соединения; остальные статусы производят подключение при отсутствии соединения

11.06.2005
  (114)
  fix: при перемещении между сообщениями в MessageView перед отображением следующнго
  сообщения показывалось предыдущее

13.06.2005
  (115)
  выход из сплэша в ростер (SplashScreen:Hide Splash)
  fix: при реконнекте в состоянии Failed значок offline

14.06.2005
  (122)
  оптимизации XML-парсера

15.06.2005
  (124)
  fix: зактрытие MessageEdit при посылке сообщений
  (проблема x65 переключения displayable + значок gprs)

16.06.2005
  (126)
  возможность приостановить/продолжить написание сообщения
  (MessageEdit:Suspend, MessageList:Resume)

  fix: клавиатура остаётся заблокированной, если был реконнект

17.06.2005
  (127)

  единообразие поведения зелёной кнопки - срабатывает как Resume 
  (если есть что продолжать) или New Message.
  возврат всегда в MessageList

  fix: Status - курсор перемещается на текущий статус 

18.06.2005
  (129)
  fix: при выборе аккаунта на S65 не происходил выход в ростер
  fix: отобращение значка коннекта

  fix: статусное сообщение от контакта с ошибкой теперь содержит 
  текст ошибки. 

  fix(?): глюки ростера при переключении аккаунтов. могло происходить при 
  переключении аккаунтов в момент сортировки ростера
  проверить не могу - я не сталкивался с этими глюками

  fix: подвисание загрузки ростера на неправильном контакте
  (контакты без @ и .  например, "123456789" - ошибочно введённый ICQ-контакт
  без транспорта)
  формально такие контакты попадают под категорию "транспорты", 
  поэтому и оказываются в группе транспорты

  fix: улучшен алгоритм сравнения JID-ов

  Status - отмена фикса "курсор перемещается на текущий статус"

0.1.21 (130)
  выводится в self-contact:
    сообщение об ошибке Failed 
    сообщение об аварийном прерывании связи

  в progress выводится сообщение Disconnected, если произошёл обрыв соединения

  (132)
  fix: Resume Message иногда оставляло в буфере ещё одно сообщение.

  MessageList: команды New Message и Resume Message поменялись местами - теперь
  Resume идёт впереди

  (133)
  выводится в self-contact:
    сообщение об ошибке Login Failed 

18.06.2005
  (140)
  для версии MIDP1 другие смайлы
  команда Quit в AccountSelect при вызове в начале загрузки.

19.06.2005
0.1.22
  (141)
  fix: ToggleSmiles не перемешает фокус на Home

  Message Composing - в MessageList изображается значок статуса composing
  отправляется composing при начале/продолжении написания сообщения,
  снимеется при Cancel/Suspend

  fix: после ошибки коннекта (если ростер не прочтён) Status:Online запрашивает
  ростер 

24.06.2005
  (150)
  fix: jid транспортов в Add Contact

27.06.2005
  (152)
  fix: при добавлении/редактировании контакта на x65 
  не происходил выход в ростер

28.06.2005
  (153)
  спецверсия MIDP1 с лог-файлом
  если в jad задан один из атрибутов: 
syslog_stream: true
syslog_exceptions: true
syslog_msg: true
  пишется файл _syslog.txt
  syslog_stream - запись xml-блоков
  syslog_exceptions - запись исключений.
  syslog_msg - запись сообщений Login, Roster Request, ...

29.06.2005
  (155)
  некоторая оптимизация xml - сокращённая форма блоков без вложенности, т.е.
  вместо <composing></composing> теперь отправляется <composing/>

30.06.2005
  (156)
  fix: проблема x65 переключения displayable + значок gprs
  попытка решить проблему кардинально
  
03.07.2005
  (157)
  fix: заработал на SE k700i.
  inputStreamReader( is, "UTF-8") - происходило блокирующее чтение из-за 
  буферизации. (особенность реализации UTF-8 в k700i)

  отключен вызов outStream.flush()

  класс OutputStreamWriter заменён на OutputStream. возможно, решит проблемы с
  чрезмерным миганием значка gprs и с большим потреблением трафика.

  (158)
  burst-обработка входящих данных. значительно повысилась скорость обработки XML
  нуждается в тестировании

0.2.0.159-RC
  (159)
  присвоение номера версии 0.2.0.159-RC (release candidate)

04.07.2005

  (161)
  версия для SonyEricsson: минимизация приложения (проба реализации)

06.07.2005
  (162)
  Contact>: изменён порядок команд для транспортов

  команда Minimize - фоновоая работа Bombus (SE). 

  автодетект платформы SonyEricsson (для команды Minimize)

  команда Resolve Nicks. по этой команде производится запрос ников 
  из vCard контактов, работающих через этот транспорт, 
  и у которых ник пока пустой. полученый ник запоминается в ростере.

  по многочисленным пожеланиям временно убрана Options:Clock

08.07.2005
  (164)
  Service Discovery - добавлена команда Server - ввод адреса 
  просматриваемого сервера

11.07.2005
0.2.1 (167)
  заработал Search в Service Discovery.

  поддержка jabber:x:data в формах Register, Search

  инструкции в формах Register, Search теперь выводятся в начале формы

  правка Midlet-Version в manifest.mf

  (169)
  снова версия без outStream.flush()
  (непроверено, необходим ли вызов на Nokia, другие телефоны безболезненно
  обходятся без него)

17.07.2005
  (170)
  MIDP1: автодетект платформы M55, изменение поведения led_pattern:
   0=off, ... 5=RUNWAY (default), ... 13=IDLE
   т.е. теперь, если телефон M55, то led_pattern по умолчанию включен на RUNWAY,
   на других телефонах led_pattern выключен

  теперь для входящего запроса авторизации используется другой значок
  (конверт с "?")

  горячая клавиша toggle offlines - удерживание "0"

  горячая клавиша minimize - удерживание "9" (SonyEricsson)

18.07.2005
  (171)
  MessageList: команда Clear List - очищает список сообщений у контакта

  Service Discovery - результаты поиска сохраняются в ростере 
  в группе Search Results. теперь, после выхода из Service Discovery,
  возможно запросить подробные vCard для найденных контактов, посылать 
  им сообщения, ...

  очистка результатов поиска производится командой Discard Search 
  (команда приписана к группе Search Results) 

18.07.2005
  (172)
  fix: после завершения Contact>Edit выход в ростер

  fix: не теряется текущий jid в рерультатах поиска (в Service Discovery)
  после просмотра данных о контакте

  атрибуты 
    key_hide: 9
    key_offlines: 0

19.07.2005
  (173)
  fix: MIDP1: происходила запись всех найденых контактов в history.
  рекомендуется почистить в телефоне папку с файлами истории
  
  оптимизация класса ростера - по размеру в памяти телефона

24.07.2005
  (174) 
  из Version Reply убрана локаль.

  начальная функциональность groupchat. интерфейса ещё нет.

07.08.2005
  (177)
  fix: Motorolla - автодетект платформы приводил к NullPointerException

  fix: SE - смайлы вставлялись в начало сообщения (не в позицию курсора). 
  теперь вставка всегда в конец сообщения.

  смайлы дополняются пробелом справа.

  автоматически дополняется пробел слева от смайла 
  (если нет, и если смайл - не первый в строке).

  fix: время оффлайн-сообщений (особенность singleton Calendar)

08.08.2005
  (178)
  конференции - первая юзабельная версия  

09.08.2005
  (179)
  fix: после ввода конференций дополнялись никами ВСЕ сообщения
  fix: composing event не работал из-за конференций
  fix: из меню не исчезала команда Leave room
  fix: имя комнаты не меняется на ник последнего участника, изменившего статус

18.08.2005
  (181)
  fix: Nokia 60 series - требуют OutputStream.flush()
  все Nokia - заблокирована функция flashBacklight из-за глюка с подсветкой 
  в 60 series

22.08.2005
  (182)
  fix: исходящие Composing events работают соответственно с одноимённой опцией
  fix: увеличены размеры буферов ввода для room и host в меню Join conference

24.08.2005
  (183)
  fix: теперь своё эхо в конференции не выдаёт сигнализацию
  src: JavaDoc на VirtualList и VirtualElement
  
  (184)
  fix: корректно работает на presence, содержащих более одного блока <x/>
  fix: отправка сообщений в конференции, не содержащие в имени сервера "conference"

25.08.2005
  (185)
  поддержка ssl соединений (через порт 5223). 
  только на телефонах MIDP2, да и то не на всех :(
  сделано для работы с talk.gmail.com (когда нормально запустят)

  возможность plain-text авторизации (отключение шифрования пароля для тех же google)

  fix: теперь своё эхо в конференции не выдаёт сигнализацию 
  (было испорчено в 184)

26.08.2005
  (186)
  расширена поддержка jabber:x:data - заработала форма register в mod_irc
  fix: отключены неиспользуемые команды контактов конференций (меню Contact >)


27.08.2005
  (187)
  в комнате пишутся статусные сообщения контактов, а также роли участников и 
  их реальные jid (видимые только модераторами)
  
  начата реализация Privacy Lists.
    что умеем - создаём список с именем Ignore-List - блокирующий все
    исходящие presence и iq для контактов из группы Ignore-List.
    можно назначить этот список на сессию (activate) 
    или на все последующие сессии (default)
    внимание! при активации списка Ignore-List НЕ ПОСЫЛАЕТСЯ offline контактам,
    попадающим под фильтрацию.
    пока активный список фильтров НЕ ПРОЧИТЫВАЕТСЯ С СЕРВЕРА при входе в Privacy Lists.

  (188)
  fix: снова заработала команда leave room

  для очистки оффлайн-контактов группы теперь достаточно свернуть группу.
  удаляются дублирующиеся контакты, у которых нет сообщений.
  также, при сворачивании неактивной конференции, конференция удалится из ростера.

30.08.2005
  (189)
  значки модераторов

  test: сборщик мусора gc() - вызывается при блокировке клавиатуры 
  (проверка поведения на нокии)

  попытка решить проблему подвисания на Siemens x65 при входящем сообщении во время
  активного меню телефона (Flyspray task #26)

31.08.2005
  (190)
  новые атрибуты для midp1
  msg_log_conf_presence: false - записывать в историю presence от контактов групчата
  msg_log_conf: false - записывать в историю сообщения в групчате

  fix: повторное подсоединение к конференции с новым именем, либо после Leave room
  теперь работает корректно (Flyspray task #39)  

05.09.2005
  (191)
  fix: возможность входа в конференции, требующие пароля (FS#50)
  поле ввода пароля в форме Join conference

  fix: исключение ArrayIndexOutOfBounds при Pageup/Pagedown 
  в пустом VirtualList (FS#28)

  Bombus теперь умеет показывать статусные сообщения вида:
  User is now known as user2
  user was kicked (reason)
  user was banned (reason)

  в случае полученя kick/ban себе, Bombus производит выход из конференции

  МОДЕРАТОРСКИЕ ИНСТРУМЕНТЫ:
  Contact>Kick - кикнуть юзера из комнаты
  Contact>Ban - забанить юзера.
  ВНИМАНИЕ! Bombus не умеет пока снимать бан. Пользоваться с осторожностью!
  Для снятия бана придётся пользоваться компьютерным клиентом!

  (192)
  fix: пароли теперь запрещено добавлять в T9/iTap  (MIDP2) (TextField.NON_PREDICTIVE)
  (пока за исключением форм в ServiceDiscovery)

06.09.2005
  (193) 
  обновление иконок

  (197)
  информационное окно About. показ статистики по heap

09.09.2005
  (198)
  проба реализации часов на экране блокировки. период перерисовки часов - 20 секунд

  пробный автодетект моторолы. отмена атрибута moto_e398. моторолы теперь входят в
  общую версию MIDP2.0

  fix: один из багов со временем исправлен. ранее у принятых presence/message
  было неправильное время до первого входа в MessageList

10.09.2005
  (200)
  fix: Service Discovery - значок для conference.* снова показывается корректно

  попытка локализовать ArrayIndexOutOfBounds в VirtualList

  Options:GMT offset - поле содержит поясное смещение времени, с учётом летнего времени (+1)
  к примеру, Москва(GMT+3): летнее смещение 4, зимнее - 3
  это значение используется для коррекции времени принятых Offline-сообщений

  Options:Clock offset - исправлять ПОСЛЕ установки GMT. посмотреть, насколько
  ошибаются часы. если часы спешат, то вводить ОТРИЦАТЕЛЬНОЕ время. если отстают - ПОЛОЖИТЕЛЬНОЕ
  это значение используется для коррекции времени Online-сообщений и показаний внутренних
  часов.

  MIDP1: из-за необходимости вводить и отрицательные числа при вводе смещения не запрещён ввод букв

  (201)
  fix после fix: значки участников конференции, что были порушены в 200.

  (202)
  *ВРЕМЕННО* на контакт комнаты в группе конференции не распространяется Show offlines

  (203)
  JEP-0090 Время клиента (jabber:iq:time)

11.09.2005
  (205)
  Privacy Lists - получает состояние active/Default
  печать символа 0x09 в MessageView как 0x20

  (206)
  форма редактирования правила в PrivacyList
  возможность просмотра и редактирования правил.


0.2.2.207
  первая рабочая реализация Privacy Lists

  ограничения - нельзя удалить активный список,
  нет вывода сообщений об ошибках.

14.09.2005
  (212)
  fix: NullPointerException в Privacy Lists - при изначально пустом Privacy lists
  и невидимый обрыв соединения.

  при создании правил автоматически заполняется поле group/jid по контакту в ростере,
  на котором стоит курсор


  (215)
  fix: обрезаются пробелы у ников в комнате и при попытке регистрации jid

  при написании сообщение в конференцию появилась возможность добавлять ник в текст

  война с исключениями на Nokia продолжается

  (216)
  рефакторинг - getChildBlockText
  рефакторинг - setQuerySign
  рефакторинг - EventOk
  оптимизация - userKeyPressed (поиск нового сообщения)
  рефакторинг - JabberDataBlock.textData
 
  команда  Contact > добавлена в MessageList

  (218)
  попытки оптимизации использования памяти.

18.09.2003
  (223) 
  начальная реализация JEP-0048 bookmarks

  (224)
  fix: исправлено добавление закладки в пустой список bookmarks

  закладки *ПОКА* запрашиваются с сервера при *КАЖДОМ* входе в bookmarks.
  в следующих версиях будет 1 раз за сессию, плюс по refresh.

  (227)
  fix: XML-парсер некорректно обрабатывал xml-атрибуты, содержащие "
  касается и входящего, и исходящего потока.
  с этим багом был связан, в частности, обрыв соединений при Resolve Nicknames

  (228)
  автофокус в ростере сделан менее агрессивным. теперь после очередного перемещения курсора 
  выполняется таймаут

21.09.2005
  (229)
  fix: кнопка 0 не перемещала курсор на контакт с сообщением, если автофокус находился
  в состоянии таймаута

  bookmarks теперь прочитываются один раз за сессию.

  (233)
  fix: проблемы с загрузкой ростера на телефонах Motorola. (пробная реализация)

  Privacy Lists - добавлен тип правила ANY - выполняемое в случае, 
  если не сработали правила до правила типа ANY.

23.09.2005
  (234)
  fix: невозможность добавления в уже скэшированные закладки 

  (235)
  privacy lists - упорядочивание правил при помощи команд Move Up / Move Down

25.09.2005
  (238)
  команда Contact > переименована в Actions >, 
  теперь будет содержать и команды для групп. 
  Команды Leave Room и Discard Search теперь находятся внутри Actions >

  Требуется тестирование на Сименсах x65 - подвисание в меню при получении 
  новых сообщений дожно быть устранено. подробности в FS#26

28.09.2005
  (239)
  отправка статусных presence в конференцию.
  
  сортировка контактов в конференции. порядок сортировки пока такой:
  статус, модератор, ник

  fix: ники в конференциях больше не начинаются с '/'

  команда Actions>Re-Enter Room для группы, содержащей оффлайн-комнату.

29.09.2005
  (240)
  fix: сортировка контактов в конференции
  fix: поведение Leave Room
  fix: отправка presence в конференции

  (242)
  небольшие оптимизации кода

02.10.2005
  (243)
  fix: использование Service Discovery блокировалось после присоединения
  к конференции при помощи Service Discovery

  fix: NullPointerException при отрисовке ростера при неудачном присоединении 
  к конференции

  (244) 
  значок "запрос серверу" в Bookmarks и Privacy Lists

  (246)
  расширение понимаемых полей в vCard, подготовка к редактору vCard

  (247)
  фикс vCard

06.10.2005
  (248)
  fix:	FS#20	Переход последнего контакта в оффлайн
  fix:  FS#66	"Leave room" на группе контактов.
  fix: resolve nicknames не работал после 246
  
  изменён порядок модераторских команд в Actions

08.10.2005
  (249)
  настройки сохраняются при выходе из формы Config по команде OK

  fix: считались одинаковыми ники Nick и nick в конференциях
  fix: теперь нет проблем при использовании в имени комнаты символов 
  верхнего регистра (FS#81)

09.10.2005
  (250)
  пробная поддержка "зелёной кнопки" на Nokia и Motorola
  поддержка fullscreen во всех окнах типа VirtualList

10.10.2005
  (251)
  fix: ограничение ввода в поле Service Discovery:Address 
  установлено в TextField.URL

  конфигуратор комнаты (Actions>Configure Room на группе конференции). 
  работает только для Owner
  known issue: команда видна и админам, но не выполняется ими.

15.10.2005
  (253)
  fix: FS#101 MessageView: Ошибка парсера сообщений при перемещении 
  между сообщениями. Задача закрыта (Исправлено)

  fix: FS#99 Поиск - возврат результата. Задача закрыта (Исправлено)

  fix: FS#96 Ошибка NullPointerException в ростере. Требуется тестирование

19.10.2005
  (254)
  оптимизации MessageParser (смайлы), перевод на паттерн Singleton
  (ускорение старта приложения)

  fix: FS#96 часть 2. NullPointerException при нажатии <OK/зелёная кнопка>
  в пустом ростере

  асинхронная обработка ростера

  (255)
  Service Discovery: начаты Ad-Hoc Commands (JEP-0050)
  Service Discovery: fix x:data - не работали формы на mod_irc

22.10.2005
  (256)
  fix: снова работает конфигурирование комнаты

  x:data - обработка типов boolean и list-single (checkbox & pulldown)  

  (258)
  возможность установки subject в конференции

23.10.2005
  (259)
  fix: FS#45 - присоединение к конференциям с одинаковым именем комнаты 
  на разных серверах

  fix: FS#42 - не переносятся пробелы на новую строку в MessageView

  fix: Ad-Hoc Commands не использовали sessionId

  удалённое управление jabber-клиентом self-контакта (Actions>Commands)

24.10.2005
0.2.3
  (261)
  fix: запрет отправки пустого subject

  vCard редактор.
  теперь vCard не сохраняется как сообщение. повторный просмотр vCard происходит
  без загрузки с сервера. для перезагрузки очистить сообщения.
  для редактирования собственного vCard необходимо включить Self-Contact и запросить у
  него vCard.
  ВНИМАНИЕ! Bombus НЕ СОХРАНЯЕТ имеющееся в vCard фото!

  (262)
  fix: MIDP1 и обработка vCard с фото

  (263)
  fix: не все поля vCard отправлялись на сервер

  fix: FS#105 в скрытую группу Not-In-List сообщения не сохраняются

  fix: FS#106 очистка сообщений у контакта не приводила к сбросу счётчика 
  непрочитанных сообщений у контакта

  fix: NullPointerException при выполнении OK в пустом Actions

28.10.2005
  (264)
  fix: FS#104 При добавлении через Add Contact нового icq-контакта 
  при выборе в поле транспорта icq.jabber.ru приложение падает с ошибкой 
  StringIndexOutOfBounds. (Nokia-specific bug)

  команда Refresh в форме vCard - перечитать vCard с сервера

  (265)
  fix: Исключение при Resolve Nicknames

30.10.2005
  0.2.4.266
  fix: у контактов, содержащих сообщения об авторизации, 
  все новые сообщения показывались сообщениями об авторизации.

  история в конференции теперь приходит без сигналов. сообщения считаются при этом НЕПРОЧИТАННЫМИ.
  сигнал выдаётся при получении subject

  редактирование affiliations (членство в комнате)
  Actions>Owners, Actions>Admins, Actions>Members, Actions>Outcasts(Ban)
  возможно как добавление новых jid, так и редактирование членства у уже имеющихся.

  [WARNING] для owner! Будьте очень осторожны с манипулированием своим jid. 
  можно запросто лишиться членства в комнате в качестве хозяина (owner). 
  owner - это высшее звание в комнате. также можно лишиться owner, 
  если попытаться себя добавить, к примеру, в админы.
  членство в комнате НЕ МОЖЕТ быть одновременно и owner, и admin.
  [/WARNING]

  (267)
  fix: увеличен максимальный размер полей вввода в формах до 200 символов

04.10.2005
  (274)
  
  //заплатка для конференций, не совместимых с jep-0045 начиная с 1.19.
  //в частности, заплатка для pub.jabber.amanda.radom.net, использующего
  //MU-Conference 0.6.0
  //(в версии стандарта 1.19 у списков admin & owner изменился namespace с
  //muc#owner на muc#admin):
  для того, чтоб на старых muc-серверах owner мог редактировать списки
  owners и admins, в jad-файл добавить атрибут
    muc_119: 0


05.10.2005
  (276)
  описание звуковых ресурсов в файле /sounds/res.txt

  переключение звукового файла в Config

  убран атрибут msg_snd

  изменение формата текстового файла /vcard.txt

  FS116: команда "- (sign)", ассоциированная со строками GMT offset и Local offset
  (на моторолах ограничение TextField.DECIMAL не подразумевает ввод отрицательных
  чисел)

  (280)
  fix: освобождение ресурса Player по окончании проигрывания звука (FS#73)

  (281)
  расширение формата описания ресурса - столбец "описание", комментарии (//)

  (282)
  fix: пустое поле GMT offset или Local offset вызывало исключение

06.10.2005

  (284)
  при поиске в JIT (icq) в списке найденных контактов значок отображает статус найденного
  контакта (онлайны видны в поиске только те, что разрешают добавлять себя без авторизации)

  fix: fullscreen при блокировке клaвиатуры

  звуковой сигнал (tone sequence). устанавливается в config выбором соответствующего sound

  (285)
  регулятор громкости звука в Options
 
  при изменении типа звука или громкости вызывается проигрывание звука

  fix: сломалась vibra_only в версии 284

08.10.2005
  (288)
  приём forwarded messages (remote controlling clients)

  команда Options:Test sound, ассоциированная с выбором звукового файла и регулятором 
  громкости. теперь изменение файла или регулирование громкости происходит беззвучно.

  (289)
  fix: исправлен автофокус
 
  (290)
  fix: снова исправлен автофокус

11.11.2005  
  (291) 
  закрыты все задачи, блокировавшие выход версии 0.3

  отключен регулятор громкости

  перенос курсора через конец списка в VirtualList 
  (за исключением MessageList и MessageView)

  fix: при повторном входе в конференцию нет сигналов на сообщениях истории

  (292)
  в режиме vibra отключено мигание

  (293)
  fix: XML-парсер зависал на последнем атрибуте в тэге, содержащем пробел.
  например, <a atr="123 ">abc</a>
  проявлялось, в частности, на html-форматированных сообщениях Gaim

  (295)
  "у Мэри был ягнёнок" - mary.seq для телефонов, поддерживающих только 
  audio/x-tone-seq

14.11.2005

0.3.0.300 - стабильная версия.

16.11.2005
  (302)
  VirtualList: устранено моргание отрисовки при отсутствии двойной 
  буферизации экрана

21.11.2005
  (303)
  подчистка репозитория на предмет удаления непубличной инфы

  начало реализации скроллбара

23.11.2005
  (308) SVN-репозиторий. (https://opencvs.csie.org/bombus/trunk)

  (309)
  начальная реализация отключения автологина при старте

24.11.2005  
  (311) 
  лицензия modified BSD license

  теперь паковка происходит в zip

26.11.2005
  (315)
  обработка событий стилуса на скроллбаре: перетаскивание ползунка, 
  нажатие вне ползунка - pageup/pagedown

27.11.2005
  (316)
  обработка одинарного нажатия на элементе списка (выбор) и двойного
  нажатия (действие)

  (317)
  jad: снова введён атрибут moto_e398 (т.к. в некоторых прошивках моторол
  теперь на запрос платформы возвращается не null, как раньше, а j2me

  Options: Keep-Alive. одноимённый атрибут из jad используется только в 
  том случае, если rms-настройки пусты

28.11.2005
  (318)
  fix: список Existing Groups в форме Add/Edit Contact теперь не содержит названия
  конференций

30.11.2005
  (319)
  fix: (ad-hoc) лишние команды Execute при работе с disco rss.jabber.ru
  немного рефакторинга в конференциях

01.12.2005
  (320)
  fix: на эмуляторе некорректно работало преобразование в utf-8 (конфигурация release)
  класс Config переведён на паттерн Singleton

  (321)
  рефакторинг класса Account

02.12.2005
  (323)
  состояние Show/Hide offlines, изменённое кнопкой 0, не сохраняется при выходе

03.12.2005
  (326)
  по многочисленным просьбам в ростере команды меню Actions и Contacts поменялись местами
  пустое меню Actions больше не вызывается 

  (327) 
  keep_alive в jad более не имеет эффекта. устанавливать период в настройках
  экспериментальный атрибут keep_alive_type, значения:
   0 - посылка " " (значение по умолчанию)
   1 - посылка "<iq/>"

  (328)
  Options: [ ] popup from background - настройка для SonyEricsson - не открывать окно 
  бомбуса при новом входящем сообщении

04.12.2005
  (329)
  fix: MIDP1-версия зацикливалась при старте (ошибка с версии 320)

05.12.2005
  (330)
  в профиль vibra вернулось мигание подсветки
  в Options добавился флаг [ ] flash backlight - глобальный запрет мигания подсветкой

  heap monitor - индикатор в заголовке окна, показывающий количество свободной памяти в куче
  (экспериментальная функция)
  в Options добавился флаг [ ] heap monitor - включение индикатора кучи.

  (331)
  расширенная информация о платформе. (экспериментальная функция)
  собираем статистику откликов телефонов

  (332)
  fix: были перепутаны с точностью до наоборот значения атрибута keep_alive_type

  (333)
  категория Options:Aplication теперь доступна и на MIDP1

06.12.2005
  (334)
  fix: сохранение default AlertProfile (было сломано в 320) 

08.12.2005
  (337)
  убрано extInfo из ответа jabber:iq:version

  ещё один фикс Ad-Hoc

  при обрывах соединения (не выбор статуса Offline) в self-contact
  записывается сообщение об ошибке (Exception)

  (338)
  перемещение по заголовкам групп ростера клавишами 3/9

  (339)
  фикс атрибута moto_e398

10.12.2005
  (340)
  диапазон Priority -128..128

  диапазон Keep Alive 30..600 секунд

  (341)
  изменения порядка мэпинга команд 
   в форме набора сообщения,
   в формах Service Discovery,
   в форме редактора vCard
  (т.е. везде, где есть ввод текста)

11.12.2005
0.3.1.347
  первая рабочая реализация архива сообщений.

  в редакторе MessageEdit добавлена команда Archive - выбор сообщения из архива 
  для добавления к набираемому

  в списках сообщений добавлена команда to Archive - скопировать сообщение в архив

  меню Tools - перенесены вглубь Service Discovery и Privacy Lists

  откат назад изменений версии 341 - многочисленные нарекания по работе как на Nokia, 
  так и на самом SE

(350)
  Actions->Commands разрешён для всех элементов ростера.
  (полезно для <feedname>@rss.jabber.ru)

(351)
  отключена паковка для MIDP1. сильно вырос размер, но мидлет на M55 ведёт себя намного шустрее
  ждём отзывов от пользователей

18.12.2005
(357)
  фиксы разрыва соединения

  сохранение в архиве темы сообщения

  возможность вставки из архива не только тела сообщения, но и jid, и subject

  Account>Login - текущий аккаунт переводится в оффлайн, 
  выбранный аккаунт активируется и переходит в онлайн

  Account>Select - текущий аккаунт переводится в оффлайн, 
  выбранный аккаунт активируется БЕЗ перехода в онлайн.

20.12.2005
(358)
  fix: в конференциях правильно отображает user has joined the channel,
  если до этого выходил из комнаты

  фиксы управления подсветкой при блоке клафиатуры на моторолах 
  (при первом использовании)

  MIDP1 - проба управления подсветкой при блокировке клавиатуры

  fix: IllegalArgumentException при переполнении буфера ввода 
  вставкой из Archive

22.12.2005
(359)
  fix: IndexOutOfBounds в ростере после приёма запроса авторизации
  (глюк в 358)

0.3.2.360
  парсинг URL, подчёркивание найденых URL
  команда Goto URL в Message View - запуск встроенного браузера

25.12.2005
(365)
  fix: перенос подчёркивания url
  fix: не добавлялся в список последний в строке url
  fix: в списке url длинные строки не скроллировались
  поскольку метод platformRequest(url) отсутствует в MIDP1, в версии MIDP1 убрана команда Goto URL

29.12.2005
(366)
  архив сообщений сохраняется сразу после добавления сообщения

5.01.2006
(368)
  ПРОЕКТУ BOMBUS исполнился 1 год :)

  архив сообщений сохраняется сразу после добавления сообщения

  переименовано поле Server addr/IP в Host name/IP
  сплэш 1Y (с) Go:st

14.01.2006
0.3.3.370
  возможность логина аккаунта без загрузки ростера и отправки presence
  (используется для работы бомбуса только с конференциями)

  MessageList>Active Contacts - список активных контактов.
  активным контактом считается контакт, содержащий хотя бы одно сообщение
  (НЕ presence).

  fix: правильная привязка указателя (стилуса) к скроллеру

  fix: FS#171: при покидании конференции по команде Leave Room 
  записывалось статусное сообщение user has joined the channel as _none_ 
  вместо user has left the channel

  fix: FS#138: при смене ника не происходило переименовывание 
  контакта участника в конференции. старый контакт уходил в оффлайн, 
  новый - становился online.

  fix: FS#149:  Kick - выгонял по старому нику
    войти в конференцию с jid/res1 и ником nick1 (ok)
    войти в конференцию с jid/res2 и ником nick1 (conflict)
    войти в конференцию с jid/res2 и ником nick2 (ok)
    kick nick1 -> nick2 вышел из конференции 
  (требуется тестирование)

16.01.2006
(372)
  размеры иконок в skin.png вычисляются по следующим правилам:
  - количество иконок по горизонтали постоянно, и равно 8
  - количество иконок по вертикали постоянно, и равно 10
  - высота всех иконок одинакова
  - ширина всех иконок одинакова
  icon_width=skin.png_width/8;   icon_height=skin.png_width/10; 

  размеры иконок в smiles.png вычисляются по следующим правилам:
  - количество иконок по горизонтали постоянно, и равно 16
  - количество иконок по вертикали не более 16
  - последняя строка иконок может содержать менее 16 элементов.
  - ширина всех иконок одинакова
  - высота всех иконок одинакова и равна ШИРИНЕ
  icon_width=smiles.png_width/8;   icon_height=icon_width;

  - для платформы midp1 ширина skin.png и smiles.png 
  не должна превышать 256 пикселей

(373)
  добавлена команда Tools>My vCard - запрос собственного vCard
  и открытие формы редактирования.

  fix: FS#180 - NullPointerException в MessageList на сообщении,
  начинающемся с url, полностью помещающегося в одну строку

  fix: в группах конференций контакт конференции не учитывается при 
  подсчёте участников конференции

(374)
  дублирование в некоторых меню кнопки джойстика OK(5) софт-клавишей

18.01.2006
(375)
  в сообщениях с type="error" выводится не только <body/>, но и <error/>
(376)
  fix: xml-парсер спотыкался на конструкциях вида <tag>'</tag> и <tag>"</tag>
(377)
  кнопка OK продублирована в меню в service discovery (Browse)
  в заголовке Service Discovery добавилось число элементов в текущем узле
(378)
  вход из MessageList в список ActiveContacts по удержанию кнопки "3"

(379)
  пробное гашение подсветки при блоке клавиатуры на самсунгах.

(385)
  новый скин 16*16 в MIDP2
  Версия 0.3.3.385 зафиксирована в стабильные.

(388) 
  переезд svn на svn.xmpp.ru

(389) 
  цвета курсора и скроллбара изменены

(391)
  fix: поведение кнопки Back на SE k750i
  некоторое изменение внешнего вида MessageView

(393)
  в заголовке MessageList показывается статус контакта

(394)
  начало переработки VirtualList под layout-модель

(395)
  fix: подсветка на мотороле теперь гасится вызовом
  display.flashBacklight(1)

(396)
  начато переписывание автофокуса.

(398)
  первый работающий механизм новой отрисовки ростера и списка сообщений
  внимание! в данный момент НЕ РАБОТАЕТ выбор url из сообщения

(399) 
  включение нового VirtualList в главную ветвь

(400)
  fix: неполное отображение архива сообщений
  fix: невозможность проскроллировать длинное последнее сообщение
  fix: концы строк наползают на скроллбар
  fix: задержка отрисовки распарсенного сообщения (сообщение некоторое время выглядит пустым, либо до нажатия на кнопку, либо 1.5-2 секунды)
  fix: курсор "оставляет след" в меню выбора смайлов

(401)
  fix: в версию MIDP1 возвращены старые цвета курсора и скроллбара

(402)
  fix: Quote в пустом списке сообщений приводило к NullPointerException

  пробная раскраска сообщиний чередованием

  реакция pageup/pagedown на нажатия стилусом на скроллбар

  fix: гашение значка непрочитанных сообщений

(403)
  доработки pageup/pagedown

(405)
  начало ветви для RIM Blackberry
  рефакторинг MessageParser

(406)
  Nickname по в форме Conference устанавливается в значение username, 
  если не указано имя аккаунта.

6.02.2006
(407)
  закончили празднования дня рождения Bombus

(410)
  пробная реализация Balloon tips
(414) 
  на баллонах подвешены: в ростере - число непрочитанных сообщений у контакта
  в MessageList - время сообщения

(420)
  в баллоне при выборе смайлов выводится текстовое представление данного смайла
  исправлено поведение стилуса при выборе смайлов

(421) 
  на пиксель вправо сдвинут тексты сообщений
  *временно* в jad-файл добавлены атрибуты:
  fontsz_balloon: 8
  fontsz_roster: 0
  fontsz_msg:0
  размеры medium=0; small=8; large=16;

---------------------------
  known issues:

  - невозможна установка смещения времени в минутах.

  - невыключающийся динамический свет и значок, 
    если сообщения пришли из оффлайна

  - Composing event - иногда продолжает висеть значок

  - error-presence - неправильный priority

  - при переключении аккаунтов в пятый раз Bombus виснет с белым экраном. 
    (присутствует, по крайней мере, на M55)

  - Nokia 60 series - не работает vibra. глюк java-машины

  - другие ошибки теперь записываются в flyspray
